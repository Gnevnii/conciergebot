## Словарь

Незарегистрированный пользователь - пользователь, о котором нет данных в бд бота;
Частично зарегистрированный пользователь - пользователь, о котором есть часть данных в бд. Но не все обязательные, поэтому данный пользователь не может общаться с ботом до полной регистрации;
Зарегистрированный пользователь - пользователь, о котором есть вся обязательная информация у бота.


Регистрационные данные о пользователе, которые требуется ввести пользователю:
обязательные:
- этаж
- план

необязательные:
- имя
- подьезд
- квартира


## Алгоритм регистрации у бота

Регистрация состоит из двух этапов:
1. фиксация принадлежности пользователя к чату дома - пользователь должен написать что-нибудь в групповом чате;
2. получение от пользователя обязательной информации в личном чате с ботом.


1. Пользователь отправляет боту сообщение в чат группы
	- бот проверяет наличие всех обязательных данных о пользователе
		- есть - выполняет команду
		- нет  - бот проверяет пройден ли первый этап регистрации у бота
			- да  - предлагает написать сообщение в личку боту
			- нет - добавляет данные о пользователе в бд и предлагает написать сообщение в личку боту.

2. Пользователь пишет сообщение в личку боту:
	- бот проверяет пройдет ли первый этап регистрации у бота
		- нет - бот предлагает сначала написать сообщение боту в чате дома
		- да  - бот проверяет есть ли незаполненные обязательные данные у пользователя
			- нет - предлагает перечень доступных комманд в личном чате с ботом;
			- да  - поочереди задает вопросы для заполнения обязательных данных
				(1. Вы проживаете в доме по адресу ул. Саларьевская, дом 8, корпус 2?
				 2. На каком этаже вы проживаете?
				 3. Какой номер плана у вашей квартиры?)



## Команды бота

В личке
#обомне - бот выводит все известные ему данные о пользователе
#мойэтажX - бот валидирует аргумент и исправляет существовавшее ранее значение
#мойпланX - бот валидирует аргумент и исправляет существовавшее ранее значение
#этажX - вывод всех известных пользователей на указанном этаже
#планX - вывод всех известных пользователей на указанном этаже
#этажXпланY или #план6этаж7 - вывод пользователей на пересечении измерений

в чате дома
#этаж7 - вывод всех известных пользователей на указанном этаже
#план7 - вывод всех известных пользователей на указанном этаже
#этаж7план7 или #план6этаж7 - вывод пользователей на пересечении измерений
#адрес, #индекс - выведен соообщение с запрашиваемой информацией


Сущности БД
cb_user
l_tg_user_id
s_tg_user_name
l_tg_userbotchat_id
l_tg_groupchat_id
i_floor
i_section
i_flat
s_name

cb_building
l_tg_groupchat_id
i_floor_max
i_section_max
i_flat_max
s_street_name
s_building_num

cb_reg_question
l_tg_user_id
s_floor_q
s_section_q
